# 프로덕션 환경 설정
server:
  address: 0.0.0.0

spring:
  cache:
    type: ${CACHE_TYPE:none}
  data:
    redis:
      # URL 설정을 제거하여 환경변수가 없을 때 크래시 방지
      # Railway에서 REDIS_URL 환경변수를 주면 자동으로 인식됨
      repositories:
        enabled: false
  
#  # Kafka 비활성화 (Railway에 Kafka 없을 경우)
#  kafka:
#    enabled: false
#  autoconfigure:
#    exclude:
#      - org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration

  # JPA 설정: 스키마 자동 업데이트
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
        # 임시로 SQL 로깅 레벨 높임
        show_sql: true

# 로깅 레벨 조정
logging:
  level:
    root: INFO
    org.example: DEBUG
    org.springframework.security: INFO

management:
  endpoints:
    web:
      exposure:
        include: health, metrics, prometheus